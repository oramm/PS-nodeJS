# Task Plan Context Template (Documentation Layers v2)

task_id: ""
task_name: ""
task_type: "feature|refactor|mixed|architecture|ops"
operations_feature_slug: ""   # e.g. persons-v2-refactor
operations_docs_path: ""      # e.g. documentation/team/operations/persons-v2-refactor/

acceptance_criteria:
  - ""

# Required context only (max 5-8 files)
required_context_files:
  - "factory/CONCEPT.md"
  - "factory/TOOL-ADAPTERS.md"
  - "factory/prompts/reviewer.md"

# Optional context loaded only if needed
optional_context_files:
  - ""

# Soft limit: 12000-20000
context_budget_tokens: 12000

documentation_layers:
  backend:
    canonical: true
    adapters: false
    factory: false
  client:
    canonical: false
    adapters: false

documentation_selection_justification:
  - ""

delivery_balance:
  feature_task_in_iteration: true
  refactor_task_in_iteration: true
  notes: ""

# --- Layer 3: Planner fields ---
technical_objectives:
  - objective: ""        # End-state of the system (what must work)
    constraints: ""      # What must not be changed

verification_criteria:
  hard: []               # Blocking for APPROVE (e.g. tests)
  soft: []               # Warnings for Reviewer

escalation_triggers: []  # Measurable thresholds -> STOP -> human

context_budget:
  max_files_for_coder: 8
  estimated_tokens: 15000
  subagent_scope: ""     # Narrow scope for coder subagents

plan_deviation: null     # Filled by Coder when an unexpected blocker appears
